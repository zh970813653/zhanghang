<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>zhanghang</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/zhanghang/favicon.ico">
    <meta name="description" content="record my learning notes">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/zhanghang/assets/css/0.styles.3f2aa9b8.css" as="style"><link rel="preload" href="/zhanghang/assets/js/app.3ed71fba.js" as="script"><link rel="preload" href="/zhanghang/assets/js/5.cac3d274.js" as="script"><link rel="preload" href="/zhanghang/assets/js/1.73cc57be.js" as="script"><link rel="preload" href="/zhanghang/assets/js/3.682d34b7.js" as="script"><link rel="prefetch" href="/zhanghang/assets/js/10.01825bd8.js"><link rel="prefetch" href="/zhanghang/assets/js/11.85860926.js"><link rel="prefetch" href="/zhanghang/assets/js/12.9062d6f4.js"><link rel="prefetch" href="/zhanghang/assets/js/13.890f5ca3.js"><link rel="prefetch" href="/zhanghang/assets/js/14.361ac1ca.js"><link rel="prefetch" href="/zhanghang/assets/js/15.10dc75e6.js"><link rel="prefetch" href="/zhanghang/assets/js/16.32312dad.js"><link rel="prefetch" href="/zhanghang/assets/js/17.e9361659.js"><link rel="prefetch" href="/zhanghang/assets/js/18.8b28d2ef.js"><link rel="prefetch" href="/zhanghang/assets/js/19.7f3eec49.js"><link rel="prefetch" href="/zhanghang/assets/js/20.8974e097.js"><link rel="prefetch" href="/zhanghang/assets/js/21.3e146050.js"><link rel="prefetch" href="/zhanghang/assets/js/22.5b324e52.js"><link rel="prefetch" href="/zhanghang/assets/js/23.5f6272b5.js"><link rel="prefetch" href="/zhanghang/assets/js/24.32592b42.js"><link rel="prefetch" href="/zhanghang/assets/js/25.d27961a9.js"><link rel="prefetch" href="/zhanghang/assets/js/26.4c177c1d.js"><link rel="prefetch" href="/zhanghang/assets/js/27.7e1cd813.js"><link rel="prefetch" href="/zhanghang/assets/js/4.3b09500a.js"><link rel="prefetch" href="/zhanghang/assets/js/6.f7952885.js"><link rel="prefetch" href="/zhanghang/assets/js/7.b5941abd.js"><link rel="prefetch" href="/zhanghang/assets/js/8.4956c359.js"><link rel="prefetch" href="/zhanghang/assets/js/9.0be189f2.js">
    <link rel="stylesheet" href="/zhanghang/assets/css/0.styles.3f2aa9b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>zhanghang</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>record my learning notes</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>zhanghang</span>
            
          <span data-v-4e82dffc>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zhanghang/" class="home-link router-link-active"><img src="/zhanghang/logo.png" alt="zhanghang" class="logo"> <span class="site-name">zhanghang</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zhanghang/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/zhanghang/docs/typeScript/ts.html" class="nav-link"><i class="iconfont reco-home"></i>
  TypeScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端工程化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhanghang/docs/leading-project/cli/cli.html" class="nav-link"><i class="undefined"></i>
  脚手架原理以及手写
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/leading-project/Gulp/Gulp.html" class="nav-link"><i class="undefined"></i>
  Gulp
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/leading-project/webpack5/webpack5.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  webpack5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Vue相关源码
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/vue-router/vue-router.html" class="nav-link"><i class="undefined"></i>
  VueRouter-history
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/vue-vuex/vue-vuex.html" class="nav-link"><i class="undefined"></i>
  Vuex实现模拟
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/vue-reactive/vue-reactive.html" class="nav-link"><i class="undefined"></i>
  响应式原理模拟
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/virtual-dom/virtual-dom.html" class="nav-link"><i class="undefined"></i>
  Virtual-dom实现原理
</a></li></ul></div></div><div class="nav-item"><a href="/zhanghang/docs/vue/ssr/ssr.html" class="nav-link"><i class="undefined"></i>
  SSR服务端渲染
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhanghang/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/zhanghang/logo.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    zhanghang
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>8</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>1</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/zhanghang/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/zhanghang/docs/typeScript/ts.html" class="nav-link"><i class="iconfont reco-home"></i>
  TypeScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      前端工程化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhanghang/docs/leading-project/cli/cli.html" class="nav-link"><i class="undefined"></i>
  脚手架原理以及手写
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/leading-project/Gulp/Gulp.html" class="nav-link"><i class="undefined"></i>
  Gulp
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/leading-project/webpack5/webpack5.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  webpack5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Vue相关源码
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/vue-router/vue-router.html" class="nav-link"><i class="undefined"></i>
  VueRouter-history
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/vue-vuex/vue-vuex.html" class="nav-link"><i class="undefined"></i>
  Vuex实现模拟
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/vue-reactive/vue-reactive.html" class="nav-link"><i class="undefined"></i>
  响应式原理模拟
</a></li><li class="dropdown-item"><!----> <a href="/zhanghang/docs/vue/virtual-dom/virtual-dom.html" class="nav-link"><i class="undefined"></i>
  Virtual-dom实现原理
</a></li></ul></div></div><div class="nav-item"><a href="/zhanghang/docs/vue/ssr/ssr.html" class="nav-link"><i class="undefined"></i>
  SSR服务端渲染
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhanghang/docs/theme-reco/" class="nav-link"><i class="undefined"></i>
  vuepress-reco
</a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>zhanghang</span>
            
          <span data-v-4e82dffc>2017 - </span>
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title"></h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>zhanghang</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="webpack5"><a href="#webpack5" class="header-anchor">#</a> webpack5</h1> <h2 id="webpack的功能"><a href="#webpack的功能" class="header-anchor">#</a> webpack的功能</h2> <ol><li>打包：将不同类型资源按模块处理进行打包</li> <li>静态：打包后最终产出静态资源</li> <li>模块：webpack支持不同规范的模块化开发</li></ol> <h2 id="安装与使用"><a href="#安装与使用" class="header-anchor">#</a> 安装与使用</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i webpack webpack<span class="token operator">-</span>cli <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 创建src目录并创建main.js文件</span>
<span class="token operator">|</span><span class="token operator">--</span> src
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> main<span class="token punctuation">.</span>js

<span class="token comment">// 用npx做简单的打包命令</span>
$ npx webpack <span class="token operator">--</span>entry <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token punctuation">.</span>js <span class="token comment">// 指定打包的入口文件</span>

$ npx webpack <span class="token operator">--</span>entry <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token punctuation">.</span>js <span class="token operator">--</span>output<span class="token operator">-</span>path <span class="token punctuation">.</span><span class="token operator">/</span>build <span class="token comment">// 指定打包的入口以及出口</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>打包成功后会生成一个build目录</strong> <img src="/zhanghang/assets/img/01.cd03bcf2.png"></p> <h2 id="webpack配置文件"><a href="#webpack配置文件" class="header-anchor">#</a> webpack配置文件</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建src目录同级目录的webpack.config.js文件作为webpack的配置文件</span>
<span class="token operator">|</span><span class="token operator">--</span> src
<span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 打包的入口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'build.js'</span><span class="token punctuation">,</span> <span class="token comment">// 输出打包的名称</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 指定的路径</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 然后修改package.json文件下的scripts， 定义一个新的命令</span>
<span class="token string">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>打包输出后:
<img src="/zhanghang/assets/img/02.bff3d27f.png"></p> <h2 id="webpack-css-loader"><a href="#webpack-css-loader" class="header-anchor">#</a> webpack Css-loader</h2> <div class="custom-block tip"><p class="title">为什么需要loader?</p><ol><li>默认情况下，webpack是没法打包css文件的。只能打包js文件。</li> <li>所以我们需要有一个&quot;人&quot;来对css进行一个转换，然后让webpack拿到转换过后的内容进行打包执行</li> <li>所以，这个转换的过程由loader进行工作</li> <li>所以，loader是必须的，它的功能就是一个转换的功能</li></ol></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装css loader</span>
$ npm i css<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span> 
<span class="token comment">// 使用</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 打包的入口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'build.js'</span><span class="token punctuation">,</span> <span class="token comment">// 输出打包的名称</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 指定的路径</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 一般就是一个正则表达式，用于我们需要匹配的文件类型</span>
        <span class="token comment">// loader: 'css-loader' // 只用一个loader处理时使用，且本身也没配置的参数</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 用什么loader进行处理，use是进行多个loader处理</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 注: use可以配置为数组包对象的形式。 如: [{},{}] 它的配置项为: </span>
 use<span class="token operator">:</span> <span class="token punctuation">[</span>
   <span class="token punctuation">{</span>
     loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
     options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// options 一半用于配置一些传入的参数。 通过参数传入的不同进行不同的操作。 当不配置options时 和以上配置一样</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="webpack-style-loader的使用"><a href="#webpack-style-loader的使用" class="header-anchor">#</a> webpack style-loader的使用</h2> <div class="custom-block tip"><p class="title">作用</p><ol><li>在界面上生成style标签</li> <li>将处理好的css内容添加进去</li></ol></div><p>作用: 让我们处理完毕的css在页面中进行展示</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装 </span>
$ npm i style<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 使用 在以上配置的基础上 use数组中添加style-loader</span>
use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block warning"><p class="title">注意</p><ol><li>use数组中的loader执行是有<span class="lineHeight">先后顺序</span>的！！！</li> <li>它的执行顺序是从右到左或者从下到上的一个执行顺序</li> <li>以上的顺序思路是首先先将css代码进行转换让webpack可以识别打包，然后给到style-loader，让浏览器引用这个css文件样式。</li></ol></div><p>演示: 我们暂时先创建一个<span class="lineHeight">html</span>文件，并且引入打包后<span class="lineHeight">dist</span>文件下<span class="lineHeight">build.js</span>目录<br> <img src="/zhanghang/assets/img/03.91d69665.png"></p> <h2 id="less-loader"><a href="#less-loader" class="header-anchor">#</a> less-loader</h2> <p><strong>当我们需要用对应的css预处理器时，需要安装对应的loader，比如sass要安装sass-loader，less要安装less-loader</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i less<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// webpack配置 再以上配置的基础上修改</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css|less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 一般就是一个正则表达式，用于我们需要匹配的文件类型</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'less-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 用什么loader进行处理</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="browserslistrc-工作流程"><a href="#browserslistrc-工作流程" class="header-anchor">#</a> browserslistrc 工作流程</h2> <div class="custom-block tip"><p class="title"></p><ol><li>当我们要做css以及js的浏览器兼容时会用到一些对应的工具，比如<span class="lineHeight">postcss</span>或者<span class="lineHeight">babel</span>等</li> <li>但是这些工具要想去工作，需要一些条件，因为我们需要告诉这写工具，到底要兼容哪些浏览器，它就会利用这些条件去筛选出相应的浏览器。然后再去做兼容</li> <li>通过<a href="https://caniuse.com/usage-table">caniuse.com</a>可以查询目前所有浏览器的占用率</li></ol></div><p><strong>知道以上的前置知识后，我们来看看它是怎么进行工作的:</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在node_modules中安装webpack时就默认安装了一个包browserslist。我们打开对应入口文件</span>
<span class="token operator">|</span><span class="token operator">--</span> node_modules
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> browserslist
<span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><img src="/zhanghang/assets/img/04.2f485178.png"> <p>入口文件引用了<span class="lineHeight">caniuse-lite</span>。 我们可以认为当我们利用脚手架去创建了一个<span class="lineHeight">vue</span>项目或者<span class="lineHeight">react</span>项目一之后。 它里面默认也安装好了<span class="lineHeight">browserslist</span>，而<span class="lineHeight">browserslist</span>在工作的时候再内部调用了<span class="lineHeight">caniuse-lite</span>，往<span class="lineHeight">caniuse.com</span>发送请求，请求回来的数据就是我们写的对应的配置所满足要求的浏览器平台。 然后在配合我们加到<span class="lineHeight">webpack</span>中的工具，再对对应的浏览器平台进行兼容的处理。 这就是它一个完整的工作流程和原理。</p> <div class="custom-block tip"><p class="title">常用配置须知</p><p><strong>在查询条件中有几个常见的字段</strong></p> <ol><li>default: 表示市场占有率大于0.5的浏览器。</li> <li><blockquote><p>1%: 表示市场占有率大于1的浏览器。</p></blockquote></li> <li>dead:  浏览器已经被废弃!  什么样的浏览器是已经废弃的浏览器呢? 24个月这个浏览器没有更新的话就是会默认已经废弃。</li> <li>not dead: 浏览器已经没有被废弃!</li> <li>last 2 version:  某一个浏览器最新的两个版本</li></ol></div><h3 id="在package-json中进行browserslist配置"><a href="#在package-json中进行browserslist配置" class="header-anchor">#</a> 在package.json中进行browserslist配置</h3> <img src="/zhanghang/assets/img/05.536962ed.png"> <p>在根目录中执行命令 <span class="lineHeight">npx browserslist</span></p> <img src="/zhanghang/assets/img/06.efec3571.png"> <p>可以看到对应返回的浏览器都是2 - 3个版本。 我们对配置稍作修改，并执行命令 <span class="lineHeight">npx browserslist</span><br> <img src="/zhanghang/assets/img/07.15930358.png"><br>
可以看到 我们把<span class="lineHeight">last 2 version</span>修改为<span class="lineHeight">last 4 version</span> 返回的浏览器数量发生了改变</p> <h3 id="创建-browserslistrc文件进行配置"><a href="#创建-browserslistrc文件进行配置" class="header-anchor">#</a> 创建.browserslistrc文件进行配置</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> node_modules
<span class="token operator">|</span><span class="token operator">--</span> <span class="token punctuation">.</span>browserslistrc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="/zhanghang/assets/img/08.8cbcd5d5.png"> <h2 id="postcss-loader-处理兼容"><a href="#postcss-loader-处理兼容" class="header-anchor">#</a> postcss-loader 处理兼容</h2> <p>css样式并不是都兼容所有浏览器的。 我们遇到使用兼容浏览器的工具<span class="lineHeight">postcss-loader</span>去帮助我们兼容浏览器</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i postcss<span class="token operator">-</span>loader postcss<span class="token operator">-</span>preset<span class="token operator">-</span>env <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 根目录下创建文件</span>
<span class="token operator">|</span><span class="token operator">--</span> node_modules
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token comment">// 对应配置 在postcss.config.js中</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 在webpack.config.js中 在use原有的基础上修改</span>
use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'postcss-loader'</span> <span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>工作流程:先由less-loader将less代码进行转换，再由postcss-loader进行浏览器兼容，然后再到css-loader让webpack可以打包css代码，然后再到style-loader让页面挂载css</strong></p> <div class="custom-block warning"><p class="title">注意</p><ol><li><span class="lineHeight">postcss-loader</span>虽然起到了兼容浏览器的作用。 但是如果要给样式加上兼容浏览器前缀，需要配合<span class="lineHeight">autoprefixer</span></li> <li>当css写了十六进制的颜色样式时，<span class="lineHeight">postcss-preset-env</span>会自动帮我们转换为<span class="lineHeight">rgba</span></li> <li><span class="lineHeight">postcss-preset-env</span>内部已经包含了<span class="lineHeight">autoprefixer</span>所以不需要额外安装<span class="lineHeight">autoprefixer</span></li></ol></div><h2 id="importloaders-属性"><a href="#importloaders-属性" class="header-anchor">#</a> importLoaders 属性</h2> <p>通过以上配置。postcss-loader可以做到css代码对浏览器的兼容。 但是还有一个问题，如果是css嵌套呢?</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 新建文件login.css,然后通过@import的方式在index.css中引入login.css</span>
<span class="token operator">|</span><span class="token operator">--</span> src
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> assets
<span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">--</span>login<span class="token punctuation">.</span>css
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><img src="/zhanghang/assets/img/09.4e856f7b.png"> <p>执行打包命令 npm run build发现:<br> <img src="/zhanghang/assets/img/10.5961d01f.png"></p> <p>并没有对login.css中的代码进行兼容前缀的添加，这是为什么呢?</p> <div class="custom-block tip"><p class="title">流程分析</p><ol><li><span class="lineHeight">index.css</span>中<span class="lineHeight">@import</span>导入了<span class="lineHeight">login.css</span></li> <li><span class="lineHeight">index.css</span>可以被匹配，当它被匹配到之后就是<span class="lineHeight">postcss-loader</span>进行工作</li> <li>基于当前代码，<span class="lineHeight">postcss-loader</span>拿到了<span class="lineHeight">index.css</span>当中的代码后分析基于我们的筛选条件并不需要做处理</li> <li>最终将代码给到了<span class="lineHeight">css-loader</span></li> <li>此时的<span class="lineHeight">postcss-loader</span>css-loader是可以处理<span class="lineHeight">postcss-loader</span>@importxxx.css文件的,但是不会回头再让<span class="lineHeight">postcss-loader</span>进行再次处理</li></ol></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 基于以上流程情况 我们需要对css-loade进行配置:</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css|less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 一般就是一个正则表达式，用于我们需要匹配的文件类型</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// 将内容推送至自身前1次 重新进行处理</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token punctuation">,</span> 
          <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 用什么loader进行处理</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>importLoaders: 将内容推送至自身前1次 重新进行处理。当匹配带对应的css文件后会再次给到postcss-loader进行处理</strong><br>
配置好后并打包发现，通过<span class="lineHeight">@import</span>引入的<span class="lineHeight">css</span>已经可以被成功的进行兼容处理了
<img src="/zhanghang/assets/img/11.492b5ab8.png"></p> <h2 id="file-loader"><a href="#file-loader" class="header-anchor">#</a> file-loader</h2> <h3 id="当是img标签引入图片时"><a href="#当是img标签引入图片时" class="header-anchor">#</a> 当是img标签引入图片时</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i file<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 在rules下增加一个对象配置项</span>
 <span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|gif|jpe?g)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      esModule<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">//不转为esModule</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="custom-block tip"><p class="title">file-loader注意点</p><ol><li>使用<span class="lineHeight">require</span>引入图片时，此时如果不配置<span class="lineHeight">esModule: false</span>, 则需要<span class="lineHeight">require('图片路径').default</span>方式导出</li> <li>可以在配置配置当中设置 <span class="lineHeight">esModule: false</span></li> <li>采用<span class="lineHeight">import xxx from 图片资源</span>，此时可以直接使用</li></ol></div><h3 id="当是背景图片引入图片时"><a href="#当是背景图片引入图片时" class="header-anchor">#</a> 当是背景图片引入图片时</h3> <img src="/zhanghang/assets/img/12.58bb84f6.png"> <p>如图所示: 我们通过<span class="lineHeight">background:url</span>的方式引入一个图片 ，然后打包后发现没有成功的引入图片，这是为什么呢?</p> <div class="custom-block tip"><p class="title">代码分析</p><ol><li>当我们引入<span class="lineHeight">css</span>文件时。会被配置项<span class="lineHeight">rules</span>下<span class="lineHeight">/.css|less$/</span>所匹配到并进行处理</li> <li>由于本身是css文件，所以<span class="lineHeight">less-loader</span>不会对它进行处理，直接交给<span class="lineHeight">postcss-loader</span>处理。</li> <li>经过<span class="lineHeight">postcss-loader</span>处理后本身没有太大变化，然后又被交给<span class="lineHeight">css-loader</span>进行处理</li> <li><span class="lineHeight">css-loader</span>是可以识别其中的url的。</li> <li><span class="lineHeight">css-loader</span>当看到url时会自动替换为<span class="lineHeight">require</span>语法。 而<span class="lineHeight">require</span>在最新的版本中导出的是<span class="lineHeight">esModule</span>。</li> <li>所以打包后我们看不到对应的图片路径，我们可以进行配置解决问题</li></ol></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在原有的基础上进行修改</span>
 use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span>
     loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
     options<span class="token operator">:</span> <span class="token punctuation">{</span>
       importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 将内容推送至自身前1次 重新进行处理</span>
       esModule<span class="token operator">:</span> <span class="token boolean">false</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token punctuation">,</span> 
   <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
   <span class="token string">'less-loader'</span>
   <span class="token punctuation">]</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="设置图片名称与输出-tscproj"><a href="#设置图片名称与输出-tscproj" class="header-anchor">#</a> 设置图片名称与输出 tscproj</h2> <p><strong>当我们使用file-loader对图片打包之后。 打包后的结果我们也想进行一些处理，比如：</strong></p> <ol><li>我们希望文件名称可以按照自己定制的规则进行生成</li> <li>我们想像打包之前一样，css img等都放在各自的文件夹中进行维护。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css|less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 一般就是一个正则表达式，用于我们需要匹配的文件类型</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 将内容推送至自身前1次 重新进行处理</span>
              esModule<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token punctuation">,</span> 
          <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 用什么loader进行处理</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|gif|jpe?g)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              esModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token comment">// 占位符</span>
              name<span class="token operator">:</span> <span class="token string">'[name].[hash:6].[ext]'</span><span class="token punctuation">,</span> <span class="token comment">// 保留之前的名称，并再后面增加6位长度哈希，再将原文件的后缀名称放入</span>
              outputPath<span class="token operator">:</span> <span class="token string">'img'</span> <span class="token comment">//将图片打包置dist下xxx目录下，这里指定img就是打包置img目录下</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 打包后发现对应的图片打包后会保留本名，并增加6位哈希，打包置dist/img目录下。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="url-loader-处理图片"><a href="#url-loader-处理图片" class="header-anchor">#</a> url-loader 处理图片</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i url<span class="token operator">-</span>loade <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 还需要将file-loader改为url-loader即可</span>
use<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    loader<span class="token operator">:</span><span class="token string">'url-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      esModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'[name].[hash:6].[ext]'</span><span class="token punctuation">,</span> 
      outputPath<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>
      limit<span class="token operator">:</span><span class="token number">25</span> <span class="token operator">*</span> <span class="token number">1024</span>  <span class="token comment">//1kb为1024b 25*1024就会25kb</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="custom-block tip"><p class="title">file-loader与url-loader之间的区别</p><ol><li><span class="lineHeight">file-loader</span>做的事情就好比是把当前图片的名称返回或者路径返回，然后把我们要打包的图片资源拷贝到对应dist目下</li> <li>而 <span class="lineHeight">url-loader</span>做的事情就是把我们当前要打包的图片资源以 <span class="lineHeight">base64</span>url的方式加载到代码中</li> <li><span class="lineHeight">url-loader</span>的好处就是减少请求次数。但是如果图片过大，这样而且会不利于首屏的加载</li> <li><span class="lineHeight">limit</span>可以控制图片是否被拷贝。 比它大的话就拷贝，比它小就转为 <span class="lineHeight">base64</span>的形式</li> <li><span class="lineHeight">limit</span>是 <span class="lineHeight">url-loader</span>中才能配置的</li></ol></div><h2 id="asset-处理图片"><a href="#asset-处理图片" class="header-anchor">#</a> asset 处理图片</h2> <p>通过file-loader或者url-loader 我们可以对图片资源进行打包。但是在新版的webpack5我们可以通过asset方式对图片资源进行处理。</p> <div class="custom-block tip"><p class="title">asset常见的配置选项</p><ol><li><span class="lineHeight">asset/resource</span>相当于 <span class="lineHeight">file-loader</span>，可以把我们的目标资源直接拷贝一份放入指定目录</li> <li><span class="lineHeight">asset/inline</span> 把相应的资源添加到对应的代码里面去， 相当于 <span class="lineHeight">url-loader</span></li> <li><span class="lineHeight">asset/source</span> 相当于 <span class="lineHeight">raw-loader</span></li> <li><span class="lineHeight">asset</span> 做动态的判断 相当于 <span class="lineHeight">url-loader</span>中的limit</li></ol></div><p>接下来看配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// asset/resource</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|gif|jpe?g)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">'asset/resource'</span><span class="token punctuation">,</span>
  generator<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定打包输出的路径</span>
    filename<span class="token operator">:</span> <span class="token string">'img/[name].[hash:6][ext] '</span><span class="token comment">// asset方式会默认帮我们加上. 所以[hash:6][ext]中间我们不需要手动加.了</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// asset/inline =&gt; 这种方式进行打包的话会类似没配置limit的url-loader，不管图片大小直接生成base64文件</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|gif|jpe?g)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">'asset/inline'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// asset</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|gif|jpe?g)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
  generator<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定打包输出的路径</span>
    filename<span class="token operator">:</span> <span class="token string">'img/[name].[hash:6][ext]'</span><span class="token comment">// asset方式会默认帮我们加上. 所以[hash:6][ext]中间我们不需要手动加.了</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 解析</span>
  parser<span class="token operator">:</span> <span class="token punctuation">{</span>
    dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
      maxSize<span class="token operator">:</span> <span class="token number">25</span><span class="token operator">*</span><span class="token number">1024</span> <span class="token comment">// 类似url-loader的limit配置 </span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="asset-处理图标字体"><a href="#asset-处理图标字体" class="header-anchor">#</a> asset 处理图标字体</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ttf|woff2?|svg|eot)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
  generator<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;font/[name].[hash:6][ext]&quot;</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="babel的使用"><a href="#babel的使用" class="header-anchor">#</a> babel的使用</h2> <div class="custom-block tip"><p class="title">为什么需要babel</p><ol><li>在react中我们会写对应的jsx， 在平常开发中我们会写ts以及大量的es6代码。</li> <li>这些语法在一些浏览器是不能被识别的。</li> <li>所以我们需要借助工具=&gt;babel 来帮我们进行转换，让浏览器识别</li></ol></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i babel<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span>
$ npm i preset<span class="token operator">-</span>env <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 使用 在rules下增加一条配置项</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span> <span class="token comment">// @babel/preset-env包含了所有语法转换的规则，需要和babel-loader一起使用</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>babel-loader除了以上配置，我们还可以创建babel.config.js文件在里面进行配置</strong><br> <img src="/zhanghang/assets/img/13.81eb6541.png"></p> <p>经过在babel.config.js配置后，webpack.config.js中的配置可以修改为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="polyfill-配置"><a href="#polyfill-配置" class="header-anchor">#</a> polyfill 配置</h2> <div class="custom-block warning"><p class="title">注意</p><ol><li><span class="lineHeight">babel-loader</span>配合<span class="lineHeight">preset-env</span>不能帮我们转换所有es6最新的代码。 比如promise。</li> <li>要转换es6最新的代码，我们需要需要借助<span class="lineHeight">@babel/polyfill</span>。</li> <li>然而。 在最新的<span class="lineHeight">@babel/bolyfill</span>中已经不建议我们直接去使用了，而是建议我们使用另外两部分<span class="lineHeight">core.js regenerator-runtime/runtime</span></li></ol></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i core<span class="token operator">-</span>js regenerator<span class="token operator">-</span>runtime
<span class="token comment">// 在babel.config.js配置下做修改</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    presets<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span>
        <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// false: 不对当前的js处理做polyfille的填充</span>
          <span class="token comment">// usage  根据用户源代码当中所使用到的新语法进行填充</span>
          <span class="token comment">// entry  依据我们当前筛选出来的浏览器决定填充什么</span>
          useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
          corejs<span class="token operator">:</span> <span class="token number">3</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="webpack插件plugin"><a href="#webpack插件plugin" class="header-anchor">#</a> webpack插件Plugin</h2> <p>plugin是webpack的插件。它类似于生命周期，从打包开始到结束，这中间过程可以做很多事情。</p> <h2 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="header-anchor">#</a> clean-webpack-plugin</h2> <p><strong>作用：帮助我们在打包完成后对输出目录(一般是dist)进行一次清空再将内容放入</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin
<span class="token comment">// 使用</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token comment">// 在module.exports配置plugins</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="header-anchor">#</a> html-webpack-plugin</h2> <p><strong>作用：可以帮我们按指定目录的html进行打包，并自动将js文件引入此模板</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin
<span class="token comment">// 使用</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token comment">/**
 * title: html文件的网页标题
 * template是以哪个模板为基础去打包生成新的模板
 */</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'HtmlWebpackPlugin'</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="copy-webpack-plugin"><a href="#copy-webpack-plugin" class="header-anchor">#</a> copy-webpack-plugin</h2> <p><strong>作用：可以帮我们从指定目录下拷贝一份放入输出目录(放入dist目录)</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin
<span class="token comment">// 使用</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CopyWeebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token comment">// 由于HtmlWebpackPlugin中以及指定了template，所以CopyWeebpackPlugin在拷贝的时候需要忽略其目录下的index.html。否则会报错</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'HtmlWebpackPlugin'</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">CopyWeebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 拷贝配置项</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          from<span class="token operator">:</span> <span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token comment">//拷贝public目录</span>
          globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            ignore<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'**/index.html'</span><span class="token punctuation">]</span> <span class="token comment">// 忽略不拷贝的内容 **表示从from配置的目录下查找</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> webpack-dev-server</h2> <p><strong>当我们修改src目录下的源代码时，每次都要手动的去进行一次build。有没有办法可以让我们直接去监听文件的变化，从而自动进行打包呢 ?</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// --watch 在package.json文件中 script下build命令增加--watch</span>
<span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>watch: true 在webpack.config.js中配置<br> <img src="/zhanghang/assets/img/14.d45ec371.png"></p> <div class="custom-block warning"><p class="title">这两个模式的不足</p><ol><li>所有源代码变动后都会被监听到</li> <li>每次编译成功后都要进行一次读写</li> <li>不能实现局部刷新</li></ol></div><p>所以我们在这里，考虑使用webpack-dev-server，来帮我们更高效率的开发</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 在package.json文件中 script下增加dev命令</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 然后控制台执行命令 npm run dev即可</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="hmr-hot-module-replacement"><a href="#hmr-hot-module-replacement" class="header-anchor">#</a> HMR Hot-Module-Replacement</h2> <p>如果在开发过程中改变了内容只需要更新改变的内容而不需要刷新浏览器怎么做 ? ------- 使用热模块更新</p> <div class="custom-block tip"><p class="title"></p><ol><li>自动刷新，整个网页全部刷新，速度较慢</li> <li>自动刷新，整个网页全部刷新，状态会丢失</li> <li>热更新: 新代码生效，网页不刷新，状态不丢失</li></ol></div><p><strong>配置</strong> <strong>target:web。屏蔽浏览器兼容性平台属性</strong> 一般在开发环境中使用
<img src="/zhanghang/assets/img/15.d72ae149.png">
这么写是没有效果的，我们还需要在入口文件中写这么一段代码<br> <img src="/zhanghang/assets/img/16.90e4fc89.png"></p> <h2 id="关于output中的path"><a href="#关于output中的path" class="header-anchor">#</a> 关于output中的path</h2> <ol><li><span class="lineHeight">publicPath</span>：告知html，将来去哪个地方找你想加载的资源 当前的域名+设置的public+filename来进行查找</li> <li><span class="lineHeight">path</span>: 打包后将资源放入哪个目录下</li></ol> <h2 id="关于devserver中的path"><a href="#关于devserver中的path" class="header-anchor">#</a> 关于devServer中的path</h2> <ol><li><span class="lineHeight">publicPath</span>：将指定本地服务所在的目录</li> <li><span class="lineHeight">contentBase</span>：我们打包之后的资源如果说依赖其它资源，此时就告知去哪找。</li> <li><span class="lineHeight">watchContentBase</span>：contentBase属性下的内容如果发生了变化。告知浏览器进行刷新</li></ol> <h2 id="devserver-常用配置"><a href="#devserver-常用配置" class="header-anchor">#</a> devServer 常用配置</h2> <ol><li><span class="lineHeight">hotOnly: true</span>当前一个界面上可能会有很多的状态。其中某一个状态在执行的过程中已经发生了改变。但是由于这个界面上用了多个组件，其中某一个组件在开发的过程中出现了语法错误，如果不配置hotOnly: true的情况下，我们将语法错误的位置将语法改对后，默认情况下对整个页面进行一次刷新的操作。如果整个页面刷新，那么之前更改的值也会回到初始的状态。而hotOnly就可以解决这个问题。</li> <li><span class="lineHeight">open: true</span>自动打开浏览器</li> <li><span class="lineHeight">port: xxxx</span>以xxxx为准，默认打开的端口号</li> <li><span class="lineHeight">compress: true</span>开启服务端的gzip压缩</li></ol> <h2 id="devserver中的proxy"><a href="#devserver中的proxy" class="header-anchor">#</a> devServer中的proxy</h2> <p>proxy：代理。在开发环境下，由于受到<a href="https://zhuanlan.zhihu.com/p/66047383">同源策略</a>的影响。客服端在向服务器请求数据时会存在跨域的情况<br>
通过proxy可以在开发模式下解决跨域的问题</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启热模块更新</span>
  open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  port<span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">,</span>
  compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// /api 可以自定义 为标识符，如果请求的路径中有/api那么会帮我们进行一次转发到对应的target https://api.github.com</span>
    <span class="token string">'/api'</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      target<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span> <span class="token comment">// 代理的路径</span>
      pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;^/api&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//pathRewrite是使用proxy进行代理时，对请求路径进行重定向以匹配到正确的请求地址，</span>
      changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="source-map"><a href="#source-map" class="header-anchor">#</a> source-map</h2> <p><strong>source-map：映射=&gt;在调试的时候可以定位到源代码的中的信息。当我们开发时有模块报错，可以准确的帮助我们定位到具体模块的位置</strong><br> <strong>在开发环境中，mode:development的情况下。devtool配置'source-map'就可以简单的开启source-map</strong><br> <img src="/zhanghang/assets/img/17.75d247c7.png"></p> <p><strong>source-map和inline-source-map之间的区别</strong><br>
配置source-map会在打包后生成一个.map的文件。里面记录了一些映射的关系。<br>
而配置inline-source-map则这段映射关系会变成base64的字符串被放到打包文件index.js的底部。<br> <strong>inline-cheap-source-map</strong><br>
当我们遇到代码量很大的时候，如果我们代码出了错误，当devtool配置项没有cheap的时候，source-map会告诉你的代码在第几行第几个字符。(会精确到哪一行哪一列除了问题)，这样的映射比较耗费性能。<br>
如果加了cheap，就不会精确到哪一行哪一列了，只会告诉你在哪一行出了问题。<br> <strong>inline-cheap-module-source-map</strong><br>
当没有module的时候。source-map只会记录业务代码，不会去管第三方的模块或者一些loader的代码。<br>
配置了module就会管第三方模块以及loader等代码。 cheap-module会对loader的处理更加的友好
<strong>eval</strong>
打包后在出口文件中通过eval的方式来生成source-map的映射关系的-----eval这种方式是执行效率最快性能最好的一种打包方式。 但是当代码复杂的时候，使用eval可能会提示的不是很全面。<br> <strong>在开发环境以及生产环境</strong><br>
在开发环境中建议用inline-cheap-module-source-map 。 这种方式提示的错误是最全的。 同时。打包速度也是比较快的。<br>
在线上环境中如果代码出了问题需要快速定位。 可以配置cheap-module-source-map。<br> <a href="https://webpack.docschina.org/configuration/devtool/#qualities">devtool更多配置</a></p> <h2 id="ts-loader编译ts"><a href="#ts-loader编译ts" class="header-anchor">#</a> ts-loader编译ts</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装</span>
$ npm i typescript typescript<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// 使用 rules增加配置项</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'ts-loader'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 或者用babel-loader进行编译，同时在babel.config.js中进行配置</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// babel.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    presets<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span>
        <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// false: 不对当前的js处理做polyfille的填充</span>
          <span class="token comment">// usage  根据用户源代码当中所使用到的新语法进行填充</span>
          <span class="token comment">// entry  依据我们当前筛选出来的浏览器决定填充什么</span>
          useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
          corejs<span class="token operator">:</span> <span class="token number">3</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">'@babel/preset-typescript'</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><div class="custom-block warning"><p class="title">区别</p><ol><li>在执行<span class="lineHeight">npm run build</span>中，当我们执行了ts中的数据类型，并且传参时错误类型的情况下。 <span class="lineHeight">babel-loader</span>不会帮我们校验，直接打包成功，<span class="lineHeight">ts-loader</span>会帮我们校验并打包时抛出错误</li> <li><span class="lineHeight">ts-loader</span>在编译ts代码时我们没法对es6最新代码进行编译 =&gt; 比如<span class="lineHeight">promise</span></li> <li><span class="lineHeight">babel-loader</span>虽然没法在打包语法校验，但是可以进行<span class="lineHeight">polyfill</span>的填充用于解析最新的es6代码</li></ol></div><p>针对与以上的问题， 我们没有没办法既可以让webpack打包的时候做语法的校验又可以同时对最新的es6语法进行编译呢?<br> <strong>思路：我们可以用babel-loader在转换之前进行一次语法的编译后，再进行打包的操作</strong><br>
通过tsc命令可以对ts语法进行效验，那么我们可以在package.json中进行如下配置  <span class="lineHeight">--noEmit</span>是为了在进行tsc语法校验时会不生成一个js文件
<img src="/zhanghang/assets/img/18.febd5bfc.png"></p> <h2 id="vue语法打包"><a href="#vue语法打包" class="header-anchor">#</a> vue语法打包</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装 </span>
$ npm i vue vue<span class="token operator">-</span>loader vue<span class="token operator">-</span>template<span class="token operator">-</span>compiler <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>对应文件内容：
<img src="/zhanghang/assets/img/19.cfc9dc96.png"></p> <p>对应配置：
<img src="/zhanghang/assets/img/20.6fb05f13.png"></p> <p><strong>当vue-loader的版本是15或者15以上就按上图所配置，如果是15以下，则不需要从vue-loader/lib/plugin里面去找对应的plugin去进行new操作了</strong></p> <h2 id="区分打包环境-合并配置"><a href="#区分打包环境-合并配置" class="header-anchor">#</a> 区分打包环境，合并配置</h2> <p>在实际的项目开发中。我们需要区分开发环境以及线上环境。
同样的，webpack打包也需要分开发环境以及线上环境。 我们可以在根目录中创建文件件config:<br> <strong>webpack.common.js</strong> <img src="/zhanghang/assets/img/21.0f035ab2.png"></p> <p><strong>webpack.dev.js</strong> <img src="/zhanghang/assets/img/22.bdf9b578.png"></p> <p><strong>webpack.prod.js</strong> <img src="/zhanghang/assets/img/23.1a7ec805.png"></p> <p><strong>package.json</strong> <img src="/zhanghang/assets/img/24.ae9dee19.png"></p> <div class="custom-block tip"><p class="title"></p><ol><li>在<span class="lineHeight">webpack.common.js</span>中，我们保存了公共的配置比如打包的入口和出口以及各个loader等。总结就是将开发环境和线上环境都需要的公共配置进行了保留</li> <li>在<span class="lineHeight">dev</span>和<span class="lineHeight">prod</span>对应的文件中如图所示我们保留各个环境所需要的的内容</li> <li>通过<span class="lineHeight">webpack-merge</span>这个包将公共的配置和单个环境的配置进行合并</li> <li>在<span class="lineHeight">webpack.common.js</span>导出的是一个函数，其中env接收的是<span class="lineHeight">package.json</span>中<span class="lineHeight">--env</span>输入的变量从而进行判断再合并</li></ol></div><p><strong>在打包的过程中我们可能会报错。 这是因为我们的配置文件进行了位置的改变，从而导致原始配置的一些路径不正确了。 我们可以针对这个错误原因对路径进行一个处理</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在目录config中创建文件paths.js</span>
<span class="token comment">// paths.js的目的就是为了确定我们的路径从哪里开始找</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token comment">// process.cwd() 当我们启动一个项目的时候，每个项目进程都有对应的自己的目录cwd就是拿到当前启动进程的目录</span>
<span class="token keyword">const</span> appDir <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">resolveApp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">relativePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>appDir<span class="token punctuation">,</span>relativePath<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports resolveApp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在webpack.common.js中引入并进行路径的替换
<img src="/zhanghang/assets/img/25.607036fc.png"></p> <h2 id="代码分割"><a href="#代码分割" class="header-anchor">#</a> 代码分割</h2> <p>当一个项目中引入了很多的文件或者插件。 如果只打包到一个文件中文件的体积会很大，首次加载的时间会很长。所以我们需要对打包文件进行一个拆分<br> <strong>optimization.splitChunks</strong>
在webpack4.0以上版本时，移除了原有的CommonsChunkPlugin 改为使用optimization.splitChunks</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.common.js目录下 配置项增加optimization配置</span>
optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
  minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      extractComments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// webpack5在打包第三方库时会单独抽出其中的注释，从而生成一个txt文件。 如果不需要这么做，将这个配置设置为false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span> <span class="token comment">// initial 对同步代码进行分割 async 对异步代码进行分割</span>
    minSize<span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span> <span class="token comment">// 检测引入的库是否大于20000这个字节(20kb) 才会做代码分割</span>
    minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 至少引入了几次才会被代码分割</span>
    <span class="token comment">// maxAsnycRequests: 5, // 同时加载的模块数最多是五个(超过了5个模块只会对前五个模块进行分割)</span>
    <span class="token comment">// maxInitialRequests: 3, // 初始页面加载时并行请求最大数小于等于3</span>
    automaticNameDelimiter<span class="token operator">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span> <span class="token comment">// 文件生成时以书面连接符号去连接</span>
    cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 缓存组</span>
      vendors<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 如果分割的库符合这一项配置的要求，打包后前面会生成vendors</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 检测引入的库是否在node_modules下</span>
        priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//权重等级，如果满足vendors这个组，再看default这个组是否也满足，如果都满足，则取决于priority的大小</span>
        filename<span class="token operator">:</span> <span class="token string">'js/[name]_vendors.js'</span>  <span class="token comment">// name与filename 之前的区别就是filename可以用占位符去操作，而name是写死</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 如果一模块已经被打包过了，在打包的时候直接忽略这个模块，用之前被打包的模块</span>
        filename<span class="token operator">:</span> <span class="token string">'js/common.js'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><img src="/zhanghang/assets/img/26.29ce3970.png"> <h2 id="runtimechunk的作用"><a href="#runtimechunk的作用" class="header-anchor">#</a> runtimeChunk的作用</h2> <p><a href="https://www.jianshu.com/p/714ce38b9fdc">作用链接</a> <br> <a href="https://webpack.docschina.org/configuration/optimization/#optimizationruntimechunk">官方配置</a></p> <h2 id="代码懒加载"><a href="#代码懒加载" class="header-anchor">#</a> 代码懒加载</h2> <p>在项目打开的时候。有些模块或者有些组件我们是不需要的。 在用到的时候才需要。 那这时候我们需要怎么去做呢?
案列:
<img src="/zhanghang/assets/img/27.c618be38.png"></p> <p>我们进行打包并打开html页面发现所有资源一次性全部加载进来了， 而utils的资源我们需要使用到的时候加载，这个时候应该怎么去做呢?<br> <strong>我们可以在点击的时候引入，从而达到懒加载的效果</strong><br> <img src="/zhanghang/assets/img/28.1a09c6cb.png"></p> <h2 id="preloading-prefetching"><a href="#preloading-prefetching" class="header-anchor">#</a> Preloading  Prefetching</h2> <p>Prefetching：预获取，异步加载代码时，在网络空闲的时候帮我们直接加载引入的模块
Preloading：预加载，异步加载代码时，同步并行加载模块
<img src="/zhanghang/assets/img/29.34fe0eb8.png"></p> <div class="custom-block tip"><p class="title">与prefetch指令相比preload指令有许多不同之处</p><ol><li><span class="lineHeight">preload chunk</span>会在父<span class="lineHeight">chunk</span>加载时，以并行方式开始加载。<span class="lineHeight">prefetch chunk</span>会在父<span class="lineHeight">chunk</span>加载结束后开始加载</li> <li><span class="lineHeight">preload chunk</span>具有中等优先级，并立即下载。<span class="lineHeight">prefetch chunk</span>在浏览器闲置时下载。</li> <li><span class="lineHeight">preload chunk</span>会在父 <span class="lineHeight">chunk</span>中立即请求，用于当下时刻。<span class="lineHeight">prefetch chunk</span>会用于未来的某个时刻。</li></ol></div><h2 id="第三方扩展设置-cdn"><a href="#第三方扩展设置-cdn" class="header-anchor">#</a> 第三方扩展设置 CDN</h2> <p><strong>关于CDN的解释：CDN就是一个内容分发的网络。它的作用就是有了这个CDN的服务器网络之后，让用户请求资源的时候可以先以最快的速度找到离他最近的资源服务器，然后去取回他想要的内容。这样的话呢，我们就可以更快更可靠的把用户所需要的内容更快的发给对方。</strong> <img src="/zhanghang/assets/img/30.4fcaed95.png"></p> <p>代码解析：这里我们在入口文件main.js直接访问_这个变量，并没有去引入lodash这个库。 在配置文件中我们配置了externals表示不需要被webpack打包的内容。其中配置了lodash: _ 表示lodash对应的导出变量。 然后从lodash的官网了解到这个库对应的cdn服务器地址是https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js。 所以当我们访问_这个变量时，都会去对应的cdn服务器去加载对应的变量</p> <h2 id="打包dll库"><a href="#打包dll库" class="header-anchor">#</a> 打包Dll库</h2> <p>在实际的项目中有一些资源体积比较大的并且代码不经常变动，所以针对这些我们没有必要每次都去做打包。所以我们可以把这些资源单独的抽离，做成一个dll动态类型库的文件。<br> <strong>我们可以穿创建一个dll文件，进行打包的配置</strong> <img src="/zhanghang/assets/img/31.5d2b79bf.png"></p> <p>这个单独的配置文件是做什么呢 ？它是把一些第三方的模块单独进行一次打包，生成一个dll文件。dll文件就是所有的第三方模块打包的代码。 然后我们用library把这个第三方模块所有的代码通过全局变量的形式暴露了出去。<br> <strong>使用 先安装npm i add-asset-html-webpack-plugin -D</strong><br>
这个插件会帮我们自动引入我们打包好的dll库<br> <img src="/zhanghang/assets/img/32.fbde2647.png"></p> <p><strong>总结: 首先当我们基于vue或者JQuery或者lodash库等 进行开发的时候。它们的代码不是经常发生变化的。如果我们每次开发的时候都把这个库进行打包到对应的bundle中去。时间消耗是非常的大的。因此，我们利用DllPlugin进行webpack单独的配置，将这些库抽离出来做成单独的文件。因此当我们使用时，只需要找这些dll单独的文件进行使用就行了。</strong></p> <h2 id="css-抽离和压缩"><a href="#css-抽离和压缩" class="header-anchor">#</a> CSS 抽离和压缩</h2> <p>针对css的处理，一共有两个部分。一个是将css代码进行单独的抽离，一个是将抽离出来的css代码进行压缩</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 安装两个库</span>
$ npm i mini<span class="token operator">-</span>css<span class="token operator">-</span>extract<span class="token operator">-</span>plugin css<span class="token operator">-</span>minimizer<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>
<span class="token comment">// mini-css-extract-plugin 作用是将css代码单独进行抽离</span>
<span class="token comment">// css-minimizer-webpack-plugin 代码是将css代码进行压缩</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用1 将css代码抽离:
<img src="/zhanghang/assets/img/33.b6a8cd30.png"></p> <p>使用2 将css代码压缩
<img src="/zhanghang/assets/img/34.232f6a7e.png"></p> <p>总结: css代码的压缩我们只需要在生成环境中进行打包压缩就可以了。</p> <h2 id="terserplugin-压缩-js"><a href="#terserplugin-压缩-js" class="header-anchor">#</a> TerserPlugin 压缩 JS</h2> <p><a href="https://webpack.docschina.org/plugins/terser-webpack-plugin/#root">TerserPlugin文档以及配置</a></p> <h2 id="scope-hoisting-优化打包速度"><a href="#scope-hoisting-优化打包速度" class="header-anchor">#</a> scope hoisting 优化打包速度</h2> <p>在webpack在打包时会进行一个静态的分析。，它回去分析其中的一些代码是否可以做变量的提升，然后将其都放在一个作用域下。</p> <img src="/zhanghang/assets/img/35.3dd4c302.png">  
打包后的文件可以清楚的看到针对utils以及main都分别生成了对应的作用域
<img src="/zhanghang/assets/img/36.b993bee6.png"> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 作用域优化 在prod文件中进行修改   webpack.optimize.ModuleConcatenationPlugin()</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> relativePath <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./paths'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CopyWeebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CssMinimizerWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'css-minimizer-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWeebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 拷贝配置项</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          from<span class="token operator">:</span> <span class="token function">relativePath</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//拷贝public目录</span>
          globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            ignore<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'**/index.html'</span><span class="token punctuation">]</span> <span class="token comment">// 忽略不拷贝的内容 **表示从from配置的目录下查找</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/[name].css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>ModuleConcatenationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>再次进行打包后，很明显就已经不一样了，之前是main.js对应一份代码，utils对应一份代码，现在将utils的代码拿到了main文件中。
<img src="/zhanghang/assets/img/37.6d1d18b1.png"></p> <p><strong>注意: 在prod文件中mode改为development只是为了更好的显示scope hoisting的概念以及ModuleConcatenationPlugin作用，在实际的production模式下，默认做了很多压缩的配置和优化，是不需要用到webpack.optimize.ModuleConcatenationPlugin()的</strong></p> <h2 id="tree-shaking-usedexports配置"><a href="#tree-shaking-usedexports配置" class="header-anchor">#</a> Tree Shaking usedExports配置</h2> <p><strong>Tree Shaking的概念: 把一个模块没有用到的内容进行剔除</strong>
假设有这么一个模块导出了foo1 foo2 两个函数， 但是我们只用了其中的一个函数foo1: 列:<br> <img src="/zhanghang/assets/img/38.cdc7bfe9.png"></p> <p>我们进行打包后发现: foo2依旧被打包进去了:<br> <img src="/zhanghang/assets/img/39.a47eaab1.png"></p> <p>那么，我们如果想在打包的时候对没有用到的内容进行剔除，我们需要怎么去做呢?  ==&gt; 配置<span class="lineHeight">usedExports</span>开启<span class="lineHeight">Tree Shaking </span></p> <img src="/zhanghang/assets/img/40.be5f9b97.png"> <p>进行打包后发现:<br> <img src="/zhanghang/assets/img/41.c0cd48d0.png"></p> <p><strong>注意 : 在development环境打包下，即使你配置了<span class="lineHeight">three-shaking</span>也不会直接从打包生成的出口文件剔除掉。它只是会在代码里提示你一下。之所以是这样是因为我们在开发环境生成的代码需要做一些调试。如果<span class="lineHeight">three-shaking</span>把一些代码剔除了，那么在做调试的时候代码对应的行数<span class="lineHeight">(sourceMap)</span>就不正确了</strong></p> <p><strong>如果硬要开启开发环境下的Three Shaking则需要配置minimize: true 开启TerserPlugin。 这样就能达到Three Shaking的作用了</strong><br> <img src="/zhanghang/assets/img/42.c223672a.png"></p> <h2 id="tree-shaking-sideeffects配置"><a href="#tree-shaking-sideeffects配置" class="header-anchor">#</a> Tree Shaking sideEffects配置</h2> <p>分析: 在某一个模块下面可能会有好几个函数是不被使用的，这个时候我们可以用usedExports进行标记，然后配置minimize: true。从而达到没有使用到的内容进行剔除的这么一个功能。但是这种情况并不能满足我们所有树摇的需求。</p> <p>接下来我们看一个列子:
<img src="/zhanghang/assets/img/43.5ca72aae.png"></p> <p>实际上我们的需求就是不需要使用这个utils的希望可以把这个副作用进行清除，那么如何可以对这个utils进行一个树摇呢? <a href="https://webpack.docschina.org/guides/tree-shaking/#mark-the-file-as-side-effect-free">side-effect-free</a><br> <img src="/zhanghang/assets/img/44.fa25c106.png"></p> <p>当设置了<span class="lineHeight">&quot;sideEffects&quot;: false</span>时： 去除或者关闭模块的副作用功能。只针对<span class="lineHeight">import “xxxxx”。</span>的引入模式有效，不对<span class="lineHeight">import x from xxx</span>或者<span class="lineHeight">import {x} from xxx</span>起作用<br>
当我们需要对其中一个模块不需要做副作用清除时，我们可以将<span class="lineHeight">sideEffects</span>配置成数组:  意思是不对其中某个模块进行副作用剔除<br> <img src="/zhanghang/assets/img/45.1707572b.png"></p> <p><strong>如上图所示，我们可以对title以及所有css文件不进行副作用的剔除。 css除了以上的配置，还有另外一种配置用法更多</strong><br> <img src="/zhanghang/assets/img/46.d1ae8a03.png"></p> <h2 id="资源压缩"><a href="#资源压缩" class="header-anchor">#</a> 资源压缩</h2> <p>服务端提供了静态资源，这些数据都是经过webpack打包的，所以我们可以在webpack打包的过程中对资源进行压缩<br> <strong>使用</strong><br> <img src="/zhanghang/assets/img/47.bd69ee8d.png"></p> <p><strong>总结: 利用webpack对我们前端的静态资源进行一个整体的压缩操作。然后得到的静态资源就可以往服务器进行部署，然后接下来客户端在请求的时候可以告诉服务端支持gzip的格式。服务端就可以把资源直接返回客户端直接进行使用。好处: 以前可能通过http请求100mb的数据，现在进行压缩后，可能只需要0.8*100 80mb左右的数据了</strong></p> <h2 id="webpack打包library库"><a href="#webpack打包library库" class="header-anchor">#</a> webpack打包library库</h2> <p><strong>当我们需要自己打包一个库去给别人使用的时候需要怎么去配置呢?</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 新建一个webpack.library.js文件 并做以下配置</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span><span class="token string">'production'</span><span class="token punctuation">,</span> 
  devtool<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/library.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'library.js'</span><span class="token punctuation">,</span> <span class="token comment">// 输出打包的名称</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'library'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 指定的路径</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span> <span class="token comment">// 表示所有支持所有的引入方式</span>
    library<span class="token operator">:</span> <span class="token string">'library'</span><span class="token punctuation">,</span> <span class="token comment">// 往全局注入的变量名称，通过这个变量可以访问导出的值</span>
    globalObject<span class="token operator">:</span> <span class="token string">'this'</span> <span class="token comment">// 编译后self的名称 一般为this</span>
    <span class="token comment">// publicPath: '/'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'html'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在package.json中新建一个打包命令 library</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./config/webpack.common.js --env production&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server --config ./config/webpack.common.js --env development&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dll&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./config/webpack.dll.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;library&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./webpack.library.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ts-verify&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 然后在./src/library.js中做以下代码</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">foo1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">foo2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token operator">*</span>b
<span class="token punctuation">}</span>

 直接进行npm run library后 打开对应的html 可以通过library这个变量分别访问到foo1以及foo2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="打包时间和内容分析"><a href="#打包时间和内容分析" class="header-anchor">#</a> 打包时间和内容分析</h2> <p><strong>在打包的过程中呢，我们需要对打包的过程进行模块打包时间的分析以及内容的分析，怎么去做呢?</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 打包的时间 </span>
$ npm i speed<span class="token operator">-</span>measure<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用:
<img src="/zhanghang/assets/img/48.6cdfa734.png"></p> <p>然后我们进行打包之后可以看到打包各个plugin以及loader所用的时间，可以针对其时间的长短去思考优化的点。
<img src="/zhanghang/assets/img/49.6e8b8314.png"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 内容分析</span>
$ npm i webpack<span class="token operator">-</span>bundle<span class="token operator">-</span>analuzer <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="/zhanghang/assets/img/50.56cbc035.png"> <p>打包后会自动弹出分析页面。 可以清楚的看到我们打包了哪些模块，内容为多大。<br> <img src="/zhanghang/assets/img/51.0fa2fda3.png"></p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/5/2022, 10:08:14 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#webpack的功能" class="sidebar-link reco-side-webpack的功能" data-v-70334359>webpack的功能</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#安装与使用" class="sidebar-link reco-side-安装与使用" data-v-70334359>安装与使用</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#webpack配置文件" class="sidebar-link reco-side-webpack配置文件" data-v-70334359>webpack配置文件</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#webpack-css-loader" class="sidebar-link reco-side-webpack-css-loader" data-v-70334359>webpack Css-loader</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#webpack-style-loader的使用" class="sidebar-link reco-side-webpack-style-loader的使用" data-v-70334359>webpack style-loader的使用</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#less-loader" class="sidebar-link reco-side-less-loader" data-v-70334359>less-loader</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#browserslistrc-工作流程" class="sidebar-link reco-side-browserslistrc-工作流程" data-v-70334359>browserslistrc 工作流程</a></li><li class="level-3" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#在package-json中进行browserslist配置" class="sidebar-link reco-side-在package-json中进行browserslist配置" data-v-70334359>在package.json中进行browserslist配置</a></li><li class="level-3" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#创建-browserslistrc文件进行配置" class="sidebar-link reco-side-创建-browserslistrc文件进行配置" data-v-70334359>创建.browserslistrc文件进行配置</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#postcss-loader-处理兼容" class="sidebar-link reco-side-postcss-loader-处理兼容" data-v-70334359>postcss-loader 处理兼容</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#importloaders-属性" class="sidebar-link reco-side-importloaders-属性" data-v-70334359>importLoaders 属性</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#file-loader" class="sidebar-link reco-side-file-loader" data-v-70334359>file-loader</a></li><li class="level-3" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#当是img标签引入图片时" class="sidebar-link reco-side-当是img标签引入图片时" data-v-70334359>当是img标签引入图片时</a></li><li class="level-3" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#当是背景图片引入图片时" class="sidebar-link reco-side-当是背景图片引入图片时" data-v-70334359>当是背景图片引入图片时</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#设置图片名称与输出-tscproj" class="sidebar-link reco-side-设置图片名称与输出-tscproj" data-v-70334359>设置图片名称与输出 tscproj</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#url-loader-处理图片" class="sidebar-link reco-side-url-loader-处理图片" data-v-70334359>url-loader 处理图片</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#asset-处理图片" class="sidebar-link reco-side-asset-处理图片" data-v-70334359>asset 处理图片</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#asset-处理图标字体" class="sidebar-link reco-side-asset-处理图标字体" data-v-70334359>asset 处理图标字体</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#babel的使用" class="sidebar-link reco-side-babel的使用" data-v-70334359>babel的使用</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#polyfill-配置" class="sidebar-link reco-side-polyfill-配置" data-v-70334359>polyfill 配置</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#webpack插件plugin" class="sidebar-link reco-side-webpack插件plugin" data-v-70334359>webpack插件Plugin</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#clean-webpack-plugin" class="sidebar-link reco-side-clean-webpack-plugin" data-v-70334359>clean-webpack-plugin</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#html-webpack-plugin" class="sidebar-link reco-side-html-webpack-plugin" data-v-70334359>html-webpack-plugin</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#copy-webpack-plugin" class="sidebar-link reco-side-copy-webpack-plugin" data-v-70334359>copy-webpack-plugin</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#webpack-dev-server" class="sidebar-link reco-side-webpack-dev-server" data-v-70334359>webpack-dev-server</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#hmr-hot-module-replacement" class="sidebar-link reco-side-hmr-hot-module-replacement" data-v-70334359>HMR Hot-Module-Replacement</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#关于output中的path" class="sidebar-link reco-side-关于output中的path" data-v-70334359>关于output中的path</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#关于devserver中的path" class="sidebar-link reco-side-关于devserver中的path" data-v-70334359>关于devServer中的path</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#devserver-常用配置" class="sidebar-link reco-side-devserver-常用配置" data-v-70334359>devServer 常用配置</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#devserver中的proxy" class="sidebar-link reco-side-devserver中的proxy" data-v-70334359>devServer中的proxy</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#source-map" class="sidebar-link reco-side-source-map" data-v-70334359>source-map</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#ts-loader编译ts" class="sidebar-link reco-side-ts-loader编译ts" data-v-70334359>ts-loader编译ts</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#vue语法打包" class="sidebar-link reco-side-vue语法打包" data-v-70334359>vue语法打包</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#区分打包环境-合并配置" class="sidebar-link reco-side-区分打包环境-合并配置" data-v-70334359>区分打包环境，合并配置</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#代码分割" class="sidebar-link reco-side-代码分割" data-v-70334359>代码分割</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#runtimechunk的作用" class="sidebar-link reco-side-runtimechunk的作用" data-v-70334359>runtimeChunk的作用</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#代码懒加载" class="sidebar-link reco-side-代码懒加载" data-v-70334359>代码懒加载</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#preloading-prefetching" class="sidebar-link reco-side-preloading-prefetching" data-v-70334359>Preloading  Prefetching</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#第三方扩展设置-cdn" class="sidebar-link reco-side-第三方扩展设置-cdn" data-v-70334359>第三方扩展设置 CDN</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#打包dll库" class="sidebar-link reco-side-打包dll库" data-v-70334359>打包Dll库</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#css-抽离和压缩" class="sidebar-link reco-side-css-抽离和压缩" data-v-70334359>CSS 抽离和压缩</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#terserplugin-压缩-js" class="sidebar-link reco-side-terserplugin-压缩-js" data-v-70334359>TerserPlugin 压缩 JS</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#scope-hoisting-优化打包速度" class="sidebar-link reco-side-scope-hoisting-优化打包速度" data-v-70334359>scope hoisting 优化打包速度</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#tree-shaking-usedexports配置" class="sidebar-link reco-side-tree-shaking-usedexports配置" data-v-70334359>Tree Shaking usedExports配置</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#tree-shaking-sideeffects配置" class="sidebar-link reco-side-tree-shaking-sideeffects配置" data-v-70334359>Tree Shaking sideEffects配置</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#资源压缩" class="sidebar-link reco-side-资源压缩" data-v-70334359>资源压缩</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#webpack打包library库" class="sidebar-link reco-side-webpack打包library库" data-v-70334359>webpack打包library库</a></li><li class="level-2" data-v-70334359><a href="/zhanghang/docs/leading-project/webpack5/webpack5.html#打包时间和内容分析" class="sidebar-link reco-side-打包时间和内容分析" data-v-70334359>打包时间和内容分析</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/zhanghang/assets/js/app.3ed71fba.js" defer></script><script src="/zhanghang/assets/js/5.cac3d274.js" defer></script><script src="/zhanghang/assets/js/1.73cc57be.js" defer></script><script src="/zhanghang/assets/js/3.682d34b7.js" defer></script>
  </body>
</html>
